<script setup lang="ts">
// import icon ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å heroicons
import { PencilSquareIcon } from "@heroicons/vue/24/solid";

// import type Blog (‡πÉ‡∏ä‡πâ‡∏ö‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°)
import type { Blog } from '@/models/blog';

// defineProps ‚Üí ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å parent component
// blog: Blog ‚Üí parent ‡∏à‡∏∞‡∏™‡πà‡∏á object ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô { id, title, content, date, active, thumbnail }
const props = defineProps<{ blog: Blog }>();

// fallback ‚Üí ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ / ‡∏£‡∏π‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô ‡∏à‡∏∞‡πÉ‡∏ä‡πâ URL ‡∏ô‡∏µ‡πâ‡πÅ‡∏ó‡∏ô
const fallback = "https://placehold.co/640x360?text=No+Image";

// onErr ‚Üí ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πá‡∏ô fallback ‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏û‡∏±‡∏á
const onErr = (e: Event) => ((e.target as HTMLImageElement).src = fallback);
</script>

<template>
  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° -->
  <div class="bg-white rounded-xl border border-gray-200 shadow">

    <!-- Header ‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏ô -->
    <div class="px-6 py-4 flex items-start justify-between gap-4">

      <!-- ‡∏ã‡πâ‡∏≤‡∏¢: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• title + ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
      <div class="min-w-0">
        <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° -->
        <h1 class="text-xl font-semibold leading-snug text-gray-800 truncate">
          {{ props.blog.title }}
        </h1>
        <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
        <p class="text-sm text-gray-500 mt-1">üìÖ {{ props.blog.date }}</p>
      </div>

      <!-- ‡∏Ç‡∏ß‡∏≤: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ + ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
      <div class="flex items-center gap-4 shrink-0">

        <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° -->
        <div class="text-sm text-gray-600">
          <span class="mr-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span>
          <!-- ‡∏ñ‡πâ‡∏≤ active=true ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß) / ‡∏ñ‡πâ‡∏≤ false ‚Üí ‡∏ã‡πà‡∏≠‡∏ô (‡∏™‡∏µ‡πÄ‡∏ó‡∏≤) -->
          <span :class="props.blog.active ? 'text-green-600 font-medium' : 'text-gray-400'">
            {{ props.blog.active ? "‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà" : "‡∏ã‡πà‡∏≠‡∏ô" }}
          </span>
        </div>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚Üí ‡πÉ‡∏ä‡πâ RouterLink ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ blogs-update -->
        <RouterLink :to="{ name: 'blogs-update', params: { id: String(props.blog.id) } }"
          class="p-2 bg-yellow-100 text-yellow-600 rounded hover:bg-yellow-200" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°">
          <PencilSquareIcon class="w-4 h-4" />
        </RouterLink>
      </div>
    </div>

    <!-- Body ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
    <div class="px-6 py-6">

      <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ thumbnail) -->
      <!-- ‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡∏û‡∏±‡∏á ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å fallback -->
      <img v-if="props.blog.thumbnail" :src="props.blog.thumbnail" alt=""
        class="mx-auto mb-6 max-h-72 object-contain rounded" @error="onErr" />

      <!-- ‡πÄ‡∏™‡πâ‡∏ô‡∏Ñ‡∏±‡πà‡∏ô -->
      <hr class="border-t border-gray-200 my-4" />

      <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° -->
      <p class="whitespace-pre-line leading-7 text-gray-700">
        {{ props.blog.content || "" }}
      </p>
    </div>
  </div>
</template>
